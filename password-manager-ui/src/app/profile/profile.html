<nav class="navbar navbar-expand-lg navbar-dark bg-primary px-4">

  <span class="navbar-brand fw-bold">
    üîê Password Manager
  </span>

  <div class="ms-auto">

    <button class="btn btn-light btn-sm"
            routerLink="/dashboard">
      Dashboard
    </button>

    <button class="btn btn-light btn-sm ms-2"
            routerLink="/vault">
      Vault
    </button>

    <button class="btn btn-light btn-sm ms-2"
            routerLink="/profile">
      Profile
    </button>

    <button class="btn btn-danger btn-sm ms-2"
            (click)="logout()">
      Logout
    </button>

  </div>

</nav>


<div class="container mt-4">

  <h3>My Profile</h3>

  <!-- Tabs -->

  <ul class="nav nav-tabs">

    <li class="nav-item">
      <button class="nav-link"
              [class.active]="activeTab === 'info'"
              (click)="activeTab='info'">
        Profile Info
      </button>
    </li>
    <li class="nav-item">
      <button class="nav-link"
              [class.active]="activeTab === '2fa'"
              (click)="activeTab='2fa'">
        Two Factor Auth
      </button>
    </li>
    <li class="nav-item">
      <button class="nav-link"
              [class.active]="activeTab === 'password'"
              (click)="activeTab='password'">
        Change Password
      </button>
    </li>

    <li class="nav-item">
      <button class="nav-link"
              [class.active]="activeTab === 'security'"
              (click)="activeTab='security'">
        Security Questions
      </button>
    </li>

  </ul>

  <div class="card p-4 shadow mt-3 col-md-6">

    <!-- ================= PROFILE INFO ================= -->

    <div *ngIf="activeTab === 'info'">

      <label>Name</label>
      <input class="form-control mb-2"
             [(ngModel)]="user.name">

      <label>Email</label>
      <input class="form-control mb-2"
             [(ngModel)]="user.email">

      <label>Phone</label>
      <input class="form-control mb-2"
             [(ngModel)]="user.phone">

      <button class="btn btn-primary"
              (click)="updateProfile()">
        Update Profile
      </button>

    </div>

    <!-- ================= CHANGE PASSWORD ================= -->

    <div *ngIf="activeTab === 'password'">

      <label>Current Password</label>
      <input type="password"
             class="form-control mb-2"
             [(ngModel)]="passwordData.currentPassword">

      <label>New Password</label>
      <input type="password"
             class="form-control mb-2"
             [(ngModel)]="passwordData.newPassword">

      <label>Confirm Password</label>
      <input type="password"
             class="form-control mb-2"
             [(ngModel)]="passwordData.confirmPassword">

      <button class="btn btn-primary"
              (click)="changePassword()">
        Change Password
      </button>

    </div>

    <!-- ================= SECURITY QUESTIONS ================= -->

    <div *ngIf="activeTab === 'security'">

      <div *ngFor="let q of securityQuestions; let i=index">

        <label>Question {{i+1}}</label>
        <input class="form-control mb-2"
               [(ngModel)]="q.question">

        <label>Answer</label>
        <input class="form-control mb-3"
               [(ngModel)]="q.answer">

      </div>

      <button class="btn btn-primary"
              (click)="updateSecurityQuestions()">
        Update Questions
      </button>

    </div>


  <div *ngIf="activeTab === '2fa'">

    <h5>Two-Factor Authentication</h5>

    <div *ngIf="!twoFAEnabled">

      <button class="btn btn-primary"
              (click)="enable2FA()">
        Enable 2FA
      </button>

    </div>

    <div *ngIf="twoFAEnabled">

      <p>Secret Key:</p>
      <code>{{secret}}</code>

      <input class="form-control mt-2"
             placeholder="Enter Code"
             [(ngModel)]="twoFACode">

      <button class="btn btn-success mt-2"
              (click)="verify2FA()">
        Verify Code
      </button>

      <button class="btn btn-danger mt-2 ms-2"
              (click)="disable2FA()">
        Disable 2FA
      </button>

    </div>

  </div>
</div>
</div>
